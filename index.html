<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¿ƒç†é—®å·ä¸è„‘ç”µæ•°æ®å¤šæ¨¡æ€åˆ†æ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.1.0/github-markdown.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #24292e;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f6f8fa;
        }
        .markdown-body {
            box-sizing: border-box;
            min-width: 200px;
            max-width: 980px;
            margin: 0 auto;
            padding: 45px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 20px;
            margin-bottom: 30px;
            border-radius: 10px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
        }
        .header .excerpt {
            font-size: 1.2em;
            opacity: 0.9;
            margin-top: 10px;
        }
        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }
        .tag {
            background: #f1f8ff;
            border: 1px solid #d1d5da;
            border-radius: 20px;
            padding: 5px 15px;
            font-size: 0.9em;
            color: #0366d6;
        }
        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }
        .tech {
            background: #f0f0f0;
            padding: 8px 16px;
            border-radius: 5px;
            font-size: 0.9em;
        }
        .project-meta {
            display: flex;
            justify-content: space-between;
            color: #6a737d;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaecef;
        }
        img {
            max-width: 100%;
            height: auto;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            margin: 20px 0;
        }
        pre {
            background: #f6f8fa;
            border-radius: 6px;
            padding: 16px;
            overflow: auto;
            font-size: 0.9em;
            border: 1px solid #e1e4e8;
        }
        code {
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
        }
        .image-caption {
            text-align: center;
            color: #6a737d;
            font-style: italic;
            margin-top: -10px;
            margin-bottom: 30px;
        }
        .section {
            margin: 40px 0;
        }
        @media (max-width: 768px) {
            .markdown-body {
                padding: 20px;
            }
            .header {
                padding: 30px 15px;
            }
            .header h1 {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>å¿ƒç†é—®å·ä¸è„‘ç”µæ•°æ®çš„å¤šæ¨¡æ€å…³è”åˆ†æ</h1>
        <p class="excerpt">ç»“åˆPCAå’ŒCCAæ–¹æ³•ï¼Œæ¢ç´¢å¿ƒç†é—®å·ç‰¹å¾ä¸è„‘ç”µæ•°æ®åœ¨300-500msæ—¶é—´çª—å£çš„å…³è”æ¨¡å¼</p>
        <div class="project-meta">
            <div>é¡¹ç›®ç±»å‹ï¼šæ•°æ®åˆ†æ</div>
            <div>æ—¥æœŸï¼š2025-12-30</div>
        </div>
    </div>
    
    <div class="markdown-body">
        <div class="tags">
            <span class="tag">PCA</span>
            <span class="tag">CCA</span>
            <span class="tag">EEGåˆ†æ</span>
            <span class="tag">å¿ƒç†æµ‹é‡</span>
            <span class="tag">å¤šæ¨¡æ€åˆ†æ</span>
        </div>
        
        <div class="tech-stack">
            <span class="tech">Python</span>
            <span class="tech">Scikit-learn</span>
            <span class="tech">Pandas</span>
            <span class="tech">Matplotlib</span>
            <span class="tech">Seaborn</span>
        </div>
        
        <div class="section">
            <h2>ğŸ“Š é¡¹ç›®èƒŒæ™¯</h2>
            <p>æœ¬ç ”ç©¶æ—¨åœ¨æ¢ç´¢å¿ƒç†é—®å·æ•°æ®ä¸è„‘ç”µä¿¡å·(EEG)ä¹‹é—´çš„å…³è”æ¨¡å¼ã€‚é€šè¿‡ä¸»æˆåˆ†åˆ†æ(PCA)å¯¹40ä¸ªå¿ƒç†é‡è¡¨ç‰¹å¾è¿›è¡Œé™ç»´ï¼Œæå–æ ¸å¿ƒå¿ƒç†ç»´åº¦(PC1å’ŒPC2)ï¼Œå¹¶è¿›ä¸€æ­¥ä½¿ç”¨å…¸å‹ç›¸å…³åˆ†æ(CCA)ç ”ç©¶è¿™äº›å¿ƒç†ç»´åº¦ä¸è„‘ç”µæ•°æ®åœ¨300-500msæ—¶é—´çª—å£çš„å…³è”æ€§ã€‚</p>
        </div>
        
        <div class="section">
            <h2>âš™ï¸ æ ¸å¿ƒå®ç°</h2>
            
            <h3>1. æ•°æ®é¢„å¤„ç†</h3>
            <pre><code>def clean_dataframe(df):
    # é€‰æ‹©éœ€è¦æ¸…æ´—çš„åˆ—
    columns_to_clean = ['BDI', 'BAI', 'Neuroticism', ...] 
    
    # å¤„ç†IDåˆ—æ ¼å¼
    df['ID'] = df['ID'].astype(str).str.extract(r'(\d+)')[0]
    
    # æ•°å€¼è½¬æ¢ä¸ç¼ºå¤±å€¼å¤„ç†
    for col in existing_columns:
        df[col] = pd.to_numeric(df[col], errors='coerce')
    
    return df.dropna(subset=existing_columns)</code></pre>
            
            <h3>2. PCAåˆ†æå®ç°</h3>
            <pre><code>def perform_pca_analysis(df, pca_columns, n_components=None):
    # æ•°æ®æ ‡å‡†åŒ–
    scaler = StandardScaler()
    X_scaled = scaler.fit_transform(X)
    
    # æ‰§è¡ŒPCA
    pca = PCA(n_components=n_components)
    pca_scores = pca.fit_transform(X_scaled)
    
    # è®¡ç®—è½½è·çŸ©é˜µ
    loadings = pca.components_.T * np.sqrt(pca.explained_variance_)
    
    return {
        'scores': pd.DataFrame(pca_scores, columns=[f'PC{i+1}' for i in range(pca_scores.shape[1])]),
        'loadings': pd.DataFrame(loadings, index=existing_columns, columns=[f'PC{i+1}' for i in range(loadings.shape[1])]),
        'explained_variance': pca.explained_variance_ratio_
    }</code></pre>
            
            <h3>3. CCAå…³è”åˆ†æ</h3>
            <pre><code># æå–EEGç‰¹å¾(300-500msæ—¶é—´çª—å£)
def extract_feature(file, subjects, time_window):
    T = pd.read_excel(file, dtype={0: str})
    T.iloc[:, 0] = T.iloc[:, 0].str.strip()
    times = T.columns[1:].astype(str).str.replace("[âˆ’â€“â€”]", "-", regex=True).astype(float)
    tidx = np.where((times >= time_window[0]) & (times <= time_window[1]))[0]
    return np.nanmean(T.iloc[:, 1:].to_numpy()[:, tidx], axis=1)

# æ‰§è¡ŒCCAåˆ†æ
cca = CCA(n_components=2)
U, V = cca.fit_transform(X_pca, Y_pca)</code></pre>
        </div>
        
        <div class="section">
            <h2>ğŸ“ˆ åˆ†æç»“æœ</h2>
            
            <h3>1. PCAåˆ†æç»“æœ</h3>
            <p>å‰ä¸¤ä¸ªä¸»æˆåˆ†(PC1å’ŒPC2)ç´¯è®¡è§£é‡Šæ–¹å·®è¾¾68.3%ï¼ŒæˆåŠŸæå–äº†é—®å·æ•°æ®çš„æ ¸å¿ƒç»´åº¦ï¼š</p>
            <img src="./images/pca_variance.png" alt="PCAæ–¹å·®è§£é‡Šç‡">
            <p class="image-caption">å›¾1ï¼šPCAæ–¹å·®è§£é‡Šç‡ç´¯ç§¯å›¾</p>
            
            <h3>2. è„‘ç”µERPæ³¢å½¢</h3>
            <p>åœ¨300-500msæ—¶é—´çª—å£è§‚å¯Ÿåˆ°æ˜æ˜¾çš„ERPæˆåˆ†ï¼Œä¸åŒè„‘åŒºå¯¹è¯ç‰©/ä¸­æ€§åˆºæ¿€çš„ååº”æ¨¡å¼å­˜åœ¨å·®å¼‚ï¼š</p>
            <img src="./images/erp_waveforms.png" alt="ERPæ³¢å½¢å›¾">
            <p class="image-caption">å›¾2ï¼šè„‘ç”µERPæ³¢å½¢åœ¨ä¸åŒè„‘åŒºçš„å¯¹æ¯”</p>
            
            <h3>3. CCAå…³è”åˆ†æ</h3>
            <p>å‘ç°å¿ƒç†é—®å·çš„PC1ä¸è„‘ç”µç‰¹å¾å­˜åœ¨æ˜¾è‘—å…³è”(r=0.42, p<0.01)ï¼š</p>
            <img src="./images/scca_scatter.png" alt="sCCAæ•£ç‚¹å›¾">
            <p class="image-caption">å›¾3ï¼šCCAæ•£ç‚¹å›¾å±•ç¤ºå¿ƒç†ç»´åº¦ä¸è„‘ç”µç‰¹å¾çš„å…³è”</p>
            
            <p>ç½®æ¢æ£€éªŒéªŒè¯äº†ç»“æœçš„ç»Ÿè®¡æ˜¾è‘—æ€§ï¼š</p>
            <img src="./images/scca_permutation.png" alt="ç½®æ¢æ£€éªŒ">
            <p class="image-caption">å›¾4ï¼šç½®æ¢æ£€éªŒéªŒè¯CCAç»“æœçš„ç»Ÿè®¡æ˜¾è‘—æ€§</p>
        </div>
        
        <div style="margin-top: 50px; padding: 20px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #0366d6;">
            <h3>ğŸ’¡ é¡¹ç›®æ€»ç»“</h3>
            <p>æœ¬é¡¹ç›®é€šè¿‡PCA-CCAå¤šæ¨¡æ€åˆ†ææ–¹æ³•ï¼ŒæˆåŠŸå‘ç°äº†å¿ƒç†é—®å·ç‰¹å¾ä¸è„‘ç”µä¿¡å·åœ¨ç‰¹å®šæ—¶é—´çª—å£çš„å…³è”æ¨¡å¼ï¼Œä¸ºå¿ƒç†ç”Ÿç†å­¦ç ”ç©¶æä¾›äº†æ–°çš„æ•°æ®åˆ†ææ¡†æ¶ã€‚</p>
        </div>
    </div>
</body>
</html>
